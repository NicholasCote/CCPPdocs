<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="title" content="NCAR | CISL Cloud Pilot">
  <meta name="description" content="UCAR">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta class="foundation-mq">
  <link rel="canonical" href="https://www.ucar.edu/">
  <link rel="shortcut icon" href="/assets/koru-base/img/app-favicons/ncar/favicon.ico">

  <title>NCAR | CISL Cloud Pilot | CISL Cloud Pilot Project</title>

  <link rel="stylesheet" href="/assets/koru-base/lib/font-awesome/css/font-awesome.min.css" media="all">
  <link rel="stylesheet" href="/assets/koru-base/lib/icomoon/style.css" media="all">
  <link rel="stylesheet" href="/assets/koru-base/css/foundation.min.css" media="all">
  <link rel="stylesheet" href="/assets/css/styles.css" media="all">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id="></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', '');
  </script>

</head>


<body class="ncar with-sidebar test">
    <div class="content-wrapper">
    <header>
    <div data-sticky-container="" class="sticky-container">
        <div data-sticky="" data-options="marginTop:0;stickyOn:small;" data-top-anchor="main-content"
             class="sticky is-anchored is-at-top">
            <div class="top-bar align-top hide-for-print" id="top-bar">
                <div class="grid-x">
                    <div class="cell">
                        <div class="grid-x align-middle">
                            <div class="cell small-3 large-2">
                                <div class="grid-x grid-margin-x nsf-logo">
                                    <div class="cell small-4">
                                        <div class="grid-x">
                                            <div class="cell small-1 small-4 xlarge-3">
                                                <p><a href="https://ncar.ucar.edu/who-we-are/funding">Sponsored By</a></p>
                                                <a href="https://ncar.ucar.edu/who-we-are/funding"><img alt="NSF Logo" src="/assets/koru-base/img/NSF_4-Color_bitmap_Logo.png"/></a>
                                            </div>
                                        </div>
                                    </div>
                                </div></div>
                            <div class="cell small-6 large-8 top-bar-title logo-wrapper align-center">
                                <h2 class="acronym-wrapper">
                                    <a href="https://ncar.ucar.edu" title="NCAR Home">
                                        <img src="/assets/koru-base/img/logo-ncar-active-large.png"
                                             alt="NCAR">
                                        <span class="show-for-sr">NCAR</span>
                                    </a>
                                </h2>
                                <h1><a href="/">CISL Cloud Pilot Project</a></h1>
                            </div>
                            <div class="cell small-3 large-2 text-right"><p class="ncar-title"><a href="https://ncar.ucar.edu">National Center for Atmospheric Research</a></p></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mobile-nav hide-for-print text-center" data-responsive-toggle="main-nav" data-hide-for="mlarge">
                <div class="title-bar-title">Menu</div>
                <button class="fa fa-chevron-down" type="button" data-toggle="main-nav"></button>
            </div>
            <div class="main-nav hide-for-print" id="main-nav">
                <div class="grid-x">
                <nav class="cell center mlarge-10 large-7">
                    <ul class="menu icons icon-left" data-responsive-menu="accordion mlarge-dropdown">
                        
                        <li aria-label="Home">
                            <a class="text-center" href="/index.html">Home</a>
                            
                        </li>
                        
                        <li aria-label="About the Project">
                            <a class="text-center" href="/pages/about/about.html">About the Project</a>
                            
                            <ul class="menu">
                                <li aria-label="About the Project"><a class="text-center" href="/pages/about/about.html">Overview</a></li>
                                
                                <li aria-label="Use Cases"><a class="text-left" href="/pages/about/use-cases.html">Use Cases</a></li>
                                
                            </ul>
                            
                        </li>
                        
                        <li aria-label="Availability">
                            <a class="text-center" href="/pages/availability/availability.html">Availability</a>
                            
                            <ul class="menu">
                                <li aria-label="Availability"><a class="text-center" href="/pages/availability/availability.html">Overview</a></li>
                                
                                <li aria-label="Hardware"><a class="text-left" href="/pages/availability/hw-resources.html">Hardware</a></li>
                                
                                <li aria-label="Potential Features"><a class="text-left" href="/pages/availability/features.html">Potential Features</a></li>
                                
                                <li aria-label="Potential Services"><a class="text-left" href="/pages/availability/services.html">Potential Services</a></li>
                                
                            </ul>
                            
                        </li>
                        
                        <li aria-label="How-Tos">
                            <a class="text-center" href="/pages/how-to/index.html">How-Tos</a>
                            
                            <ul class="menu">
                                <li aria-label="How-Tos"><a class="text-center" href="/pages/how-to/index.html">Overview</a></li>
                                
                                <li aria-label="Agile Interaction"><a class="text-left" href="/pages/how-to/agile.html">Agile Interaction</a></li>
                                
                                <li aria-label="Build Documentation"><a class="text-left" href="/pages/how-to/build-docs.html">Build Documentation</a></li>
                                
                                <li aria-label="Install JupyterHub on K8s"><a class="text-left" href="/pages/how-to/k8sJH/install.html">Install JupyterHub on K8s</a></li>
                                
                                <li aria-label="Create custom Jupyter container"><a class="text-left" href="/pages/how-to/k8sJH/customize-docker.html">Create custom Jupyter container</a></li>
                                
                                <li aria-label="Setup GitHub action to build and push Docker Images"><a class="text-left" href="/pages/how-to/k8sJH/setup-gh-act.html">Setup GitHub action to build and push Docker Images</a></li>
                                
                            </ul>
                            
                        </li>
                        
                        <li aria-label="Contact Us">
                            <a class="text-center" href="/pages/contact/contact.html">Contact Us</a>
                            
                        </li>
                        
                    </ul>
                </nav>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="body-content" id="main-content">
            <div class="cell banner">
    <div class="grid-x align-center-middle">
        <div class="cell text-center">
            <div class="grid-y banner-content">
                <h1 class="cell">CISL Cloud Pilot</h1>
                <p class="cell" style="color:#fff; font-size:1.4rem;">Check progress on our up to date Kanban</p>
                <div class="cell">
                    <a class="cta-link large white-on-color" href="https://jira.ucar.edu/secure/RapidBoard.jspa?rapidView=220&projectKey=CCPP" target="_blank">Link to Kanban Page</a>
                </div>
            </div>
        </div>
    </div>
</div>
            <section class="panel primary-content">
        <div class="grid-x align-center">
            <div class="cell medium-8 large-9">
                <article role="article" class="content">
                    <h1 id="setup-github-actions-to-build-docker-image-automatically">Setup GitHub actions to Build Docker image automatically</h1>

<p>As part of having a continuous integration workflow GitHub actions is utilized to rebuild Docker images whenever new code is pushed to a specific directory.</p>

<p>In order to utilize GitHub actions a directory named <strong><em>.github</em></strong> needs to be created in the base directory of the repository.
The <strong><em>.github</em></strong> directory should also contain a directory named <strong><em>workflows</em></strong> in order to store and run the different <a href="https://docs.github.com/en/actions/using-workflows/about-workflows">workflows</a> created.
The workflow itself is a <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions"><strong><em>yaml</em></strong></a> file that defines the actions that <a href="https://docs.github.com/en/actions/using-workflows/triggering-a-workflow">trigger</a> and execute what is required for the continuous integration application.</p>

<h2 id="example-githubworkflowsbuild-push-basenbyaml">Example <strong><em>.github/workflows/build-push-basenb.yaml</em></strong></h2>

<p>This example workflow utilizes a few different github actions to build a docker image and push it to a container registry. Each step is explained in detail via inline comments.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This workflow builds docker images and pushes them to a Docker Hub Repository
# This workflow is specific to the base-notebook directory and image
# Set the workflow name
name: Deploy base-notebook

# Define the trigger that starts the action
# For this workflow the trigger is on a push that changes anything in the configs/jupyter/base-notebook/ path
on:
  push:
    paths:
      - configs/jupyter/base-notebook/**

# Define the actions that are going to take place as part of this workflow    
jobs:
  # Name the job(s)
  deploy-docker-base-notebook:
    # Define where the job should run in this case it will be run on the latest ubuntu image
    runs-on: ubuntu-latest
    # Set the steps to take in order
    steps:
      # Step 1 is to checkout the github repo used to build the Dockerfile
      - name: Check out the repo
        uses: actions/checkout@v3
      # Step 2 is to login to docker hub so the image can be pushed
      - name: Login to Docker Hub
        uses: docker/login-action@v2
        # GitHub secrets are used to provide login information to docker hub
        with:
          username: $
          password: $
      # Pull relevant metadata out of the docker image used
      # This can be expanded upon
      - name: Extract metadata for Docker
        id: meta
        uses: docker/metadata-action@v4
        with:
          images: ncote/cisl-cloud-base
      # Build and push the docker image
      - name: Build and push Docker image
        uses: docker/build-push-action@v4
        with:
          # Provide the current directory as build context 
          context: .
          # Specify where the Dockerfile is located in relation to the repo base path
          file: configs/jupyter/base-notebook/Dockerfile
          # Enable the push to docker hub
          push: true
          # Provide the tags to apply to the image, this example uses the latest image tag 
          tags: ncote/cisl-cloud-base:latest
          # Apply labels as defined in the Docker image metadata
          labels: $
</code></pre></div></div>

                </article>
            </div>
        </div>
    </section>
        </div>

    <footer>
    <div class="grid-x grid-padding-y footer-menu-tertiary">
        <div class="cell text-center">
            <small>Â©  UCAR</small>
            <ul class="menu vertical">
                <li><a href="https://www.ucar.edu/privacy-notice">Privacy</a></li>
                <li><a href="https://www.ucar.edu/cookie-other-tracking-technologies-notice">Cookies</a></li>
                <li><a href="https://www.ucar.edu/terms-of-use">Terms of Use</a></li>
                <li><a href="https://www.ucar.edu/notification-copyright-infringement-digital-millenium-copyright-act">Copyright Issues</a></li>
                <li><a href="https://nsf.gov">Sponsored by NSF</a></li>
                <li><a href="https://ncar.ucar.edu">NCAR Home</a></li>
                <li><a href="https://www.ucar.edu">UCAR Home</a></li>
            </ul>
        </div>
    </div>
    <div class="grid-x grid-padding-y footer-sponsor">
        <div class="cell">
            <div class="grid-container">
                <div class="grid-x">
                    <div class="cell small-auto medium-10 description">
                        <p>The National Center for Atmospheric Research is sponsored by the National Science Foundation. Any opinions, findings and conclusions or recommendations expressed in this material do not necessarily reflect the views of the National Science Foundation.</p>
                    </div>
                    <div class="cell small-3 medium-2 mlarge-1 logo">
                        <a href="https://www.nsf.gov/" target="_blank"><img src="/assets/koru-base/img/footer-logo-nsf.png" alt="National Science Foundation"></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
    </div>
</body>

<script src="/assets/koru-base/lib/jquery/dist/jquery.js"></script>
<script src="/assets/koru-base/lib/foundation-sites/dist/js/foundation.js"></script>
<script src="/assets/koru-base/js/main.min.js"></script>
</html>